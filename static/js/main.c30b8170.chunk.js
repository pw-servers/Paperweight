(this.webpackJsonppaperweight=this.webpackJsonppaperweight||[]).push([[0],{116:function(e,t,n){},180:function(e,t){},233:function(e,t,n){"use strict";n.r(t);var c,s,r=n(1),a=n.n(r),i=n(22),l=n.n(i),o=(n(115),n(116),n(24)),u=["title","titleId"];function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e}).apply(this,arguments)}function j(e,t){if(null==e)return{};var n,c,s=function(e,t){if(null==e)return{};var n,c,s={},r=Object.keys(e);for(c=0;c<r.length;c++)n=r[c],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(c=0;c<r.length;c++)n=r[c],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function x(e,t){var n=e.title,a=e.titleId,i=j(e,u);return r.createElement("svg",d({viewBox:"0 0 129.969 75.306",xmlnsXlink:"http://www.w3.org/1999/xlink",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},i),n?r.createElement("title",{id:a},n):null,c||(c=r.createElement("defs",null,r.createElement("linearGradient",{id:"b"},r.createElement("stop",{offset:0,stopColor:"#5119de"}),r.createElement("stop",{offset:1,stopColor:"#a191e9"})),r.createElement("linearGradient",{id:"a"},r.createElement("stop",{offset:0,stopColor:"#000014"}),r.createElement("stop",{offset:1,stopColor:"#000014",stopOpacity:0})),r.createElement("linearGradient",{xlinkHref:"#a",id:"c",x1:27.563,y1:138.974,x2:183.648,y2:138.974,gradientUnits:"userSpaceOnUse"}),r.createElement("linearGradient",{xlinkHref:"#b",id:"d",gradientUnits:"userSpaceOnUse",x1:511.931,y1:498.892,x2:188.965,y2:238.827}))),s||(s=r.createElement("g",{transform:"translate(-95.979 -105.81)"},r.createElement("path",{d:"M264.717 182.96A146.583 146.583 0 00118.49 321.853a80.364 80.364 0 00-.332-.022 80.364 80.364 0 00-80.363 80.363 80.364 80.364 0 0078.41 80.235v.129H572.67v-.15a56.255 56.255 0 0055.053-56.16 56.255 56.255 0 00-56.254-56.257 56.255 56.255 0 00-11.84 1.422 119.581 119.581 0 00.826-13.58 119.581 119.581 0 00-119.58-119.58 119.581 119.581 0 00-52.705 12.41 146.583 146.583 0 00-123.453-67.701z",transform:"matrix(-.1846 0 0 .2015 221.996 76.41)",fill:"url(#d)"}),r.createElement("path",{d:"M187.153 132.812c-19.942 3.52-32.589 5.728-51.012 8.272 5.485 1.542 8.202 3.655 9.203 8.733a944.615 944.615 0 0025.486-9.024c-6.017 3.698-13.827 6.559-23.764 11.583 4.736 2.963 6.016 7.017 5.98 13.501 13.032-12.423 21.985-21.82 34.107-33.065z",fill:"#fff"}),r.createElement("rect",{width:.265,height:2.117,x:198.803,y:91.413,rx:6.676,fill:"#fff"}))))}var m=r.forwardRef(x),f=(n.p,n(49),n(25)),b=n(23),p=n(256),O=n(16),h=n.n(O),v=n(26),g=n(14),y=n(108),N=n(100),w=n(101),S=n.n(w),k=n(2);function C(e){var t=a.a.createRef(),n=e.text;return Object(r.useEffect)((function(){t.current.scrollTop=t.current.scrollHeight})),Object(k.jsx)("div",{className:"console-text",ref:t,children:(n||[]).map((function(e,t){return function(e,t){var n=e;if(""===e.trim())return;return n=function(e){var t,n=e.matchAll(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&/=]*)/gi),c=Object(N.a)(n);try{for(c.s();!(t=c.n()).done;){var s=t.value;e=e.replaceAll(s[0],"<a target='_blank' class='console-link' href='"+s[0]+"'>"+s[0]+"</a>")}}catch(r){c.e(r)}finally{c.f()}return e}(function(e){if("["!==e[0])return"<strong class='text-muted'>> "+e+"</strong>";return e}(function(e){return e.replaceAll(">","&gt;").replaceAll("<","&lt;")}(e.trim()))),Object(k.jsx)("p",{children:S()(n)},t)}(e,t)}))})}var E=n(102),P=n(62),A=null,I=null;function z(e,t){return L.apply(this,arguments)}function L(){return(L=Object(v.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A&&A.close(),A=null,I=new Promise((function(e,c){var s=new P.EventEmitter,r=E.io.connect(t+":"+n);A=r,r.on("connect",(function(){console.log("Connected to "+t+":"+n),r.emit("action","history_request",{id:"default"}),r.once("disconnect",(function(){s.emit("disconnect")})),e(s)})),r.onAny((function(){s.emit(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3])})),s.on("action",(function(e,t){r.emit("action",e,t)}))})),e.abrupt("return",I);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _=a.a.createContext(null),T=n(239);var D=function(e){var t=Object(r.useState)([]),n=Object(g.a)(t,2),c=n[0],s=n[1],i=Object(r.useState)([]),l=Object(g.a)(i,2),o=l[0],u=l[1],d=Object(r.useState)(-1),j=Object(g.a)(d,2),x=j[0],m=j[1],f=a.a.useContext(_);function b(e){c=[].concat(Object(y.a)(c),[e.split("\n")]).flat(),s(c)}return Object(r.useEffect)((function(){function e(e){b(e.text)}function t(e){s(e.records.map((function(e){return(e.args.text||"").split("\n")})).flat())}return f.connection.on("history",t),f.connection.on("server_output",e),function(){f.connection.removeListener("history",t),f.connection.removeListener("server_output",e)}}),[c,f,b]),Object(k.jsxs)("div",{className:"console",children:[Object(k.jsx)(C,{text:c}),Object(k.jsxs)("div",{className:"console-input-container",children:[Object(k.jsx)("input",{type:"text",id:"consoleCommand",className:"console-input",onKeyDown:function(e){"Enter"===e.key&&(b(e.target.value),o.unshift(e.target.value),u(o),f.connection.emit("action","server_input",{id:"default",text:e.target.value+"\r\n"}),e.target.value=""),"ArrowUp"===e.key&&x<o.length-1&&(m(x+=1),e.target.value=o[x]),"ArrowDown"===e.key?x>0&&(m(x-=1),e.target.value=o[x]):m(-1)}}),Object(k.jsx)(T.a,{})]})]})},B=n(103),G=n(104),U=n(109),F=n(107),H=n(240),M=function(e){Object(U.a)(n,e);var t=Object(F.a)(n);function n(e){var c;return Object(B.a)(this,n),(c=t.call(this,e)).state={hasError:!1},c}return Object(G.a)(n,[{key:"componentDidCatch",value:function(e,t){console.log(e,t)}},{key:"render",value:function(){return this.state.hasError?Object(k.jsxs)("div",{className:"d-flex flex-column align-items-center justify-content-center w-100 h-100",children:[Object(k.jsx)(H.a,{className:"text-muted"}),Object(k.jsx)("span",{className:"text-muted text-center",children:"Something went wrong."})]}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),n}(a.a.Component),R=n(40);function W(e){return Object(k.jsx)("div",{className:"spinner-container",children:Object(k.jsxs)("div",{className:"spinner",children:[Object(k.jsx)("div",{className:"spinner-component"}),Object(k.jsx)("div",{className:"spinner-component"}),Object(k.jsx)("div",{className:"spinner-component"}),Object(k.jsx)("div",{className:"spinner-component"})]})})}var Z=n(241);function q(e){return Object(k.jsx)("div",{className:"display-5 server-icon",children:(t=e.name,t.split(" ").map((function(e){return e[0]})).slice(0,2))});var t}function J(e){var t=e.server,n=e.clientInfo,c=Object(r.useContext)(_);return e.addServerButton?Object(k.jsxs)("div",{id:"addServer",className:"d-flex flex-row align-items-center justify-content-flex-start server-icon-container",children:[Object(k.jsx)("div",{className:"server-icon text-muted d-flex align-items-center justify-content-center",children:Object(k.jsx)(Z.a,{})}),Object(k.jsx)("span",{className:"server-name",children:"Add a server"})]}):Object(k.jsxs)("div",{className:(c.endpoint===t.ip+":"+t.port?"selected ":"")+"d-flex flex-row align-items-center justify-content-flex-start server-icon-container",onClick:Object(v.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.setEndpoint(t.ip,t.port);case 2:c.setServerName(n.name);case 3:case"end":return e.stop()}}),e)}))),children:[Object(k.jsx)(q,{name:n.name}),Object(k.jsx)("span",{className:"server-name",children:n.name})]})}function K(e){var t=e.user;return Object(k.jsx)("div",{className:"d-flex flex-column justify-content-flex-start align-items-flex-start sidebar",children:Object(k.jsxs)(M,{children:[Object(k.jsx)(R.a,{path:"/users/"+t.uid+"/servers/",children:function(e){return e.isLoading?Object(k.jsx)(W,{}):(e.value.sort((function(e,t){return e.index-t.index})),e.value.map((function(e,t){return Object(k.jsx)(R.b,{path:"/servers/"+e.id+"/",children:function(t){return!1===t.isLoading?Object(k.jsx)(J,{clientInfo:e,server:t.value}):""}},t)})))}}),Object(k.jsx)(J,{addServerButton:!0})]})})}var Q=n(251),X=n(252),Y=n(66),V=n(242),$=n(243),ee=n(244),te=n(245),ne=n(246),ce=n(249),se=n(250),re=n(247),ae=n(248),ie=n(255),le=["ref"],oe=["ref"];function ue(e){var t=a.a.useContext(_),n=e.pageState;function c(e){switch(e.page){case"Console":return Object(k.jsx)(V.a,{className:"menu-icon"});case"Players":return Object(k.jsx)($.a,{className:"menu-icon"});case"Tools":return Object(k.jsx)(ee.a,{className:"menu-icon"});case"Settings":return Object(k.jsx)(te.a,{className:"menu-icon"});default:return Object(k.jsx)(ne.a,{className:"menu-icon"})}}function s(e){var t=e.status;switch(console.log(t),t){case"connected":return Object(k.jsx)(re.a,{pill:!0,className:"bg-success text-uppercase",children:"Connected"});case"connecting":return Object(k.jsx)(re.a,{pill:!0,className:"bg-warning text-uppercase",children:"Connecting..."});case"disconnected":return Object(k.jsx)(re.a,{pill:!0,className:"bg-danger text-uppercase",children:"Disconnected"});default:return Object(k.jsx)(re.a,{pill:!0,className:"bg-secondary text-uppercase",children:"Status Unknown"})}}function r(e){var t=e.text,n=e.id;return Object(k.jsx)(ae.a,{id:n,className:"no-animate",children:t})}return Object(k.jsxs)("div",{className:"d-flex flex-row align-items-center justify-content-start pb-4 w-100",children:[Object(k.jsxs)("div",{id:"serverNameCluster",className:"d-flex align-items-baseline justify-content-start",children:[Object(k.jsx)("strong",{className:"gradient-text server-name",children:t.serverName}),Object(k.jsx)("small",{className:"very-small text-light text-uppercase text-muted px-2",children:t.endpoint})]}),Object(k.jsx)("div",{className:"flex-grow-1 d-flex flex-row align-items-center justify-content-around",children:n.pages.map((function(e,t){return Object(k.jsxs)("span",{className:"d-flex flex-column align-items-center justify-content-start clickable menu-item p-2"+(e===n.page?" selected":""),onClick:function(){n.setPage(e)},children:[Object(k.jsx)(c,{page:e}),Object(k.jsx)("small",{className:"mt-1 text-muted",children:e})]},t)}))}),Object(k.jsxs)("div",{className:"d-flex flex-column align-items-end justify-content-center",children:[Object(k.jsx)(s,{status:t.connectionStatus}),Object(k.jsxs)("div",{className:"power-group d-flex flex-row align-items-center justify-content-center px-3 py-1 mt-1",children:[Object(k.jsx)(ie.a,{placement:"bottom",delay:{show:500,hide:500},overlay:r({id:"power-tooltip",text:"Turn on/off the server"}),children:function(e){var n=e.ref,c=Object(Y.a)(e,le);return Object(k.jsx)(ce.a,Object(o.a)(Object(o.a)({ref:n},c),{},{className:"px-2 clickable",size:40,onClick:function(){t.connection.emit("action","stop_server",{id:"default"})}}))}}),Object(k.jsx)(ie.a,{placement:"bottom",delay:{show:500,hide:500},overlay:r({id:"power-tooltip",text:"Restart the server"}),children:function(e){var n=e.ref,c=Object(Y.a)(e,oe);return Object(k.jsx)(se.a,Object(o.a)(Object(o.a)({ref:n},c),{},{className:"px-2 clickable",size:40,onClick:function(){t.connection.emit("action","restart_server",{id:"default"})}}))}})]})]})]})}function de(e){var t=Object(r.useState)(null),n=Object(g.a)(t,2),c=n[0],s=n[1],a=Object(r.useState)("disconnected"),i=Object(g.a)(a,2),l=i[0],o=i[1],u=Object(r.useState)(null),d=Object(g.a)(u,2),j=d[0],x=d[1],m=Object(r.useState)(null),f=Object(g.a)(m,2),p=f[0],O=f[1],y=Object(r.useState)("Console"),N=Object(g.a)(y,2),w=N[0],S=N[1];function C(e,t){return E.apply(this,arguments)}function E(){return(E=Object(v.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(t+":"+n),o("connecting"),e.t0=s,e.next=5,z(t,n);case 5:e.t1=e.sent,(0,e.t0)(e.t1),o("connected");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return A.apply(this,arguments)}function A(){return(A=Object(v.a)(h.a.mark((function e(){var t,n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("attempting reconnect"),t=j.split(":"),n=t[0],c=t[1],e.next=6,C(n,c);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var I={connection:c,connectionStatus:l,endpoint:j,serverName:p,setEndpoint:C,setServerName:O},L={page:w,pages:["Console","Players","Tools","Settings"],setPage:S};function T(e){switch((L=e.pageState).page){case"Console":return I.connection.emit("action","history_request",{id:"default"}),Object(k.jsx)(D,{});default:return Object(k.jsxs)("div",{className:"d-flex flex-column align-items-center justify-content-center pt-5",children:[Object(k.jsx)(Q.a,{className:"text-muted mb-3",size:128}),Object(k.jsx)("div",{className:"text-muted display-5",children:"This page doesn't exist!"}),Object(k.jsx)("div",{className:"text-muted",children:"Not sure how this happened, but the page you tried to access doesn't exist..."})]})}}function B(e){return Object(k.jsx)("div",{id:"dashboardContainer",children:Object(k.jsxs)("div",{id:"dashboard",children:[Object(k.jsx)(ue,{pageState:L}),Object(k.jsx)(T,{pageState:L})]})})}function G(e){return null!=I.connection&&"connected"===l?Object(k.jsx)(B,{}):null!=I.connection?Object(k.jsxs)("div",{className:"d-flex flex-column align-items-center justify-content-center pt-5",children:[Object(k.jsx)(W,{}),Object(k.jsx)("div",{className:"text-muted pt-4",children:"Trying to connect to server..."})]}):Object(k.jsxs)("div",{className:"d-flex flex-column align-items-center justify-content-center pt-5",children:[Object(k.jsx)(X.a,{className:"text-muted mb-3",size:128}),Object(k.jsx)("div",{className:"text-muted display-5",children:"Hey there!"}),Object(k.jsxs)("div",{className:"text-muted",children:["Pick or add a server on the ",Object(k.jsx)("strong",{children:"sidebar"})," to get started."]})]})}return Object(r.useEffect)((function(){return null!=c&&c.on("disconnect",P),function(){null!=c&&c.removeListener("disconnect",P)}})),Object(k.jsx)(b.c,{children:function(e){var t=e.user;return Object(k.jsxs)(_.Provider,{value:I,children:[Object(k.jsx)(K,{user:t}),Object(k.jsx)(G,{})]})}})}var je=new f.a.auth.GoogleAuthProvider,xe={apiKey:"AIzaSyBdSRrnavw7OcfIEOF-AhpS_wCb4QrGIDY",authDomain:"paperweight-servers.firebaseapp.com",projectId:"paperweight-servers",storageBucket:"paperweight-servers.appspot.com",messagingSenderId:"187944474431",appId:"1:187944474431:web:44fbc8766400e31742e58a"};function me(){return Object(k.jsxs)("div",{id:"authWindow",className:"d-flex flex-column align-content-center card card-body mx-auto",children:[Object(k.jsx)("small",{className:"text-muted",children:"WELCOME TO"}),Object(k.jsxs)("div",{className:"d-inline-flex flex-row align-items-center",children:[Object(k.jsx)(m,{className:"icon mb-1"}),Object(k.jsx)("h5",{className:"display-5 fw-bold gradient-text",children:"Paperweight"})]}),Object(k.jsx)("div",{className:"mt-3",children:Object(k.jsx)(p.a,{variant:"outline-primary",onClick:function(){f.a.auth().signInWithPopup(je)},children:"Log in with Google"})})]})}function fe(e){return Object(k.jsxs)(b.a,{children:[Object(k.jsx)(b.d,{children:Object(k.jsx)(me,{})}),Object(k.jsx)(b.c,{children:Object(k.jsx)(de,{})})]})}var be=n(253),pe=n(254);function Oe(e){var t=Object(r.useState)(!1),n=Object(g.a)(t,2),c=n[0],s=n[1],a=function(){s(!c)};function i(e){return e.pictureOnly?"":Object(k.jsx)("span",{className:"mx-3 text-muted",children:e.user.displayName})}return Object(k.jsx)(b.c,{children:function(t){var n=t.user;return Object(k.jsxs)("div",{className:(c?"expand":"")+" user-dropdown-container no-animate px-3",onMouseLeave:function(){setTimeout((function(){s(!1)}),750)},children:[Object(k.jsxs)("div",{id:"userDisplay",className:"d-flex flex-row align-items-center justify-content-between",onClick:a,children:[Object(k.jsx)("img",{src:n.photoURL,id:"userPhoto",alt:n.displayName+" profile photo"}),Object(k.jsx)(i,{user:n,pictureOnly:e.pictureOnly}),Object(k.jsx)(be.a,{className:"text-muted"})]}),Object(k.jsxs)("div",{className:"user-dropdown-options",children:[Object(k.jsx)("hr",{className:"text-muted"}),Object(k.jsxs)("div",{className:"option",children:[Object(k.jsx)(te.a,{className:"mx-2",size:24}),Object(k.jsx)("span",{children:"Settings"})]}),Object(k.jsxs)("div",{className:"option",onClick:function(){f.a.auth().signOut().then((function(){s(!1)}))},children:[Object(k.jsx)(pe.a,{className:"mx-2",size:24}),Object(k.jsx)("span",{children:"Log Out"})]})]})]})}})}var he=n(106);n(234);var ve=function(){return Object(k.jsx)(he.a,{children:Object(k.jsx)(b.b,Object(o.a)(Object(o.a)({firebase:f.a},xe),{},{children:Object(k.jsxs)(R.c,Object(o.a)(Object(o.a)({firebase:f.a},xe),{},{children:[Object(k.jsxs)("header",{className:"px-3",children:[Object(k.jsxs)("div",{className:"d-inline-flex flex-row align-items-center",children:[Object(k.jsx)(m,{className:"icon mb-1"}),Object(k.jsx)("h5",{className:"display-5 fw-bold gradient-text",children:"Paperweight"})]}),Object(k.jsx)("div",{className:"flex-grow-1",style:{maxWidth:"50%"}}),Object(k.jsx)(Oe,{pictureOnly:!1})]}),Object(k.jsx)("div",{className:"content",children:Object(k.jsx)(fe,{})})]}))}))})},ge=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,257)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),c(e),s(e),r(e),a(e)}))};l.a.render(Object(k.jsx)(a.a.StrictMode,{children:Object(k.jsx)(ve,{})}),document.getElementById("root")),ge()}},[[233,1,2]]]);
//# sourceMappingURL=main.c30b8170.chunk.js.map